/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["modulo.custom.TreeCheck"]){dojo._hasResource["modulo.custom.TreeCheck"]=true;dojo.provide("modulo.custom.TreeCheck");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.Tree");dojo.declare("modulo.custom.ChkTree",dijit.Tree,{_clickTarget:null,_createTreeNode:function(_1){return new modulo.custom._ChkTreeNode(_1);},getIconClass:function(_2,_3){if(_2.root||this.model.store.getValue(_2,"type")!="child"){return this.inherited(arguments);}return "icon-toolbar-tablelightning";},getLabelClass:function(_4,_5){if(_4.root||this.model.store.getValue(_4,"type")!="child"){return this.inherited(arguments);}return "class";},onNodeChecked:function(_6){},onNodeUnchecked:function(_7){},onClick:function(_8,_9){if(_8.root||this.model.store.getValue(_8,"type")!="child"){this._onExpandoClick({node:_9});}else{if(!_9._checkbox){return;}if(this._clickTarget&&this._clickTarget.nodeName!="INPUT"){_9._checkbox.checked=!_9._checkbox.checked;}if(_9._checkbox.checked){this.onNodeChecked(_9);}else{this.onNodeUnchecked(_9);}}},_onClick:function(_a,_b){this._clickTarget=_b.target;if(this._clickTarget&&this._clickTarget.nodeName=="INPUT"){var _c=dijit.getEnclosingWidget(this._clickTarget);this.onClick(_c.item,_c);return;}return this.inherited(arguments);},refresh:function(){this._itemNodeMap={};this.model.root=null;if(this.rootNode){this.rootNode.destroyRecursive();}this._load();}});dojo.declare("modulo.custom._ChkTreeNode",dijit._TreeNode,{postCreate:function(){this._createCheckbox();this.inherited(arguments);},_createCheckbox:function(){if(this.item.root||this.tree.model.store.getValue(this.item,"type")!="child"){return true;}this._checkbox=dojo.doc.createElement("input");this._checkbox.type="checkbox";this._checkbox.checked=this.tree.model.store.getValue(this.item,"checked");this._checkbox.id=this.tree.model.store.getValue(this.item,"id");dojo.place(this._checkbox,this.expandoNode,"after");},getId:function(){return this.tree.model.store.getValue(this.item,"id");},markCheck:function(){this._checkbox.checked=!this._checkbox.checked;}});}