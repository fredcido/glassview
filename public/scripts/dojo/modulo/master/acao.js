/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["modulo.master.acao"]){dojo._hasResource["modulo.master.acao"]=true;dojo.require("modulo.padrao.geral");dojo.require("modulo.padrao.grid");dojo.provide("modulo.master.acao");dojo.declare("modulo.master.acao",[modulo.padrao.geral,modulo.padrao.grid],{constructor:function(){},initGrid:function(){objGeral.loading(true);masterAcao.gridHeader="#,"+objGeral.translate("Descrição")+","+objGeral.translate("Tela")+","+objGeral.translate("Identificador");document.getElementById("gridMasterAcao").style.height=objGrid.gridHeight+"px";masterAcao.grid=new dhtmlXGridObject("gridMasterAcao");masterAcao.grid.setHeader(masterAcao.gridHeader);masterAcao.grid.attachHeader("#rspan,#text_filter,#select_filter,#text_filter");masterAcao.grid.setInitWidths(objGrid.idWidth+",*,350,350");masterAcao.grid.setColAlign("center,left,left,left");masterAcao.grid.setColTypes("ro,ro,ro,ro");masterAcao.grid.setColSorting("str,str,str,str");masterAcao.grid.setSkin(objGrid.theme);masterAcao.grid.enablePaging(true,objGrid.pagResults,objGrid.pagIndexes,"divpagMasterAcaoGrid",true,"divpagMasterAcao");masterAcao.grid.attachFooter(objGrid.tituloTotal+",#cspan,#cspan,{#stat_count}");masterAcao.grid.attachEvent("onRowDblClicked",masterAcao.edit);masterAcao.grid.init();masterAcao.grid.load(baseUrl+"/master/acao/list",dojo.hitch(objGeral,"loading",false),"json");},novo:function(){objGeral.createDialog("/master/acao/form/",objGeral.translate("Ação"));},edit:function(){if(!masterAcao.grid.getSelectedId()){objGeral.msgAlerta(objGeral.translate("Selecione o item para edição."));return false;}objGeral.createDialog("/master/acao/edit/id/"+masterAcao.grid.getSelectedId(),objGeral.translate("Ação"));return true;},atualizarGrid:function(){objGeral.atualizarGrids([masterAcao.grid]);},addPrivilegio:function(){var _1=$("<td />");var _2=$("<td />");var tr=$("<tr />");var _3=new dijit.form.ValidationTextBox({name:"privilegios[]",required:true});_1.append(_3.domNode);var _4=$("<div />");_4.addClass("icon-toolbar-cancel").click(function(){if(!confirm(objGeral.translate("Deseja realmente remover este item?"))){return false;}objGeral.deleteRow($(this).parent().parent());return true;}).attr("title",objGeral.translate("Remover Privilégio")).css("cursor","pointer");_2.append(_4);tr.append(_1).append(_2);$("#tbl-privilegio-acao").append(tr);},removePrilegioBase:function(id,_5){if(!confirm(objGeral.translate("Deseja realmente remover este item?"))){return false;}var _6={url:baseUrl+"/master/acao/delete-privilegio/id/"+id,handle:"json",callback:function(_7){if(_7.status){objGeral.deleteRow($(_5).parent().parent());}else{objGeral.msgErro(_7.message);}}};objGeral.buscaAjax(_6);return true;}});var masterAcao=new modulo.master.acao();}