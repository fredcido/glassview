/*
	Copyright (c) 2004-2010, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["modulo.admin.funcionario"]){dojo._hasResource["modulo.admin.funcionario"]=true;dojo.require("modulo.padrao.geral");dojo.require("modulo.padrao.grid");dojo.provide("modulo.admin.funcionario");dojo.declare("modulo.admin.funcionario",[modulo.padrao.geral,modulo.padrao.grid],{constructor:function(){},initGrid:function(){objGeral.loading(true);adminFuncionario.gridHeader="#,"+objGeral.translate("Nome")+","+objGeral.translate("E-mail")+","+objGeral.translate("Cargo");document.getElementById("gridAdminFuncionario").style.height=objGrid.gridHeight+"px";adminFuncionario.grid=new dhtmlXGridObject("gridAdminFuncionario");adminFuncionario.grid.setHeader(adminFuncionario.gridHeader);adminFuncionario.grid.attachHeader("#rspan,#text_filter,#text_filter,#select_filter");adminFuncionario.grid.setInitWidths(objGrid.idWidth+",*,400,300");adminFuncionario.grid.setColAlign("center,left,left,left");adminFuncionario.grid.setColTypes("ro,ro,ro,ro");adminFuncionario.grid.setColSorting("str,str,str,str");adminFuncionario.grid.setSkin(objGrid.theme);adminFuncionario.grid.enablePaging(true,objGrid.pagResults,objGrid.pagIndexes,"divpagAdminFuncionarioGrid",true,"divpagAdminFuncionario");adminFuncionario.grid.attachFooter(objGrid.tituloTotal+",#cspan,#cspan,{#stat_count}");adminFuncionario.grid.attachEvent("onRowDblClicked",adminFuncionario.edit);adminFuncionario.grid.init();adminFuncionario.grid.load(baseUrl+"/admin/funcionario/list",dojo.hitch(objGeral,"loading",false),"json");},novo:function(){objGeral.createDialog("/admin/funcionario/form/",objGeral.translate("Funcionário"));},edit:function(){if(!adminFuncionario.grid.getSelectedId()){objGeral.msgAlerta(objGeral.translate("Selecione o item para edição."));return false;}objGeral.createDialog("/admin/funcionario/edit/id/"+adminFuncionario.grid.getSelectedId(),objGeral.translate("Funcionário"));return true;},atualizarGrid:function(){objGeral.atualizarGrids([adminFuncionario.grid]);},liberaUsuario:function(){var _1=dijit.byId("usuario").get("value");var _2=["usuario_nivel","usuario_login","usuario_senha","usuario_senha2","perfil_id"];var _3=_1=="S";dojo.forEach(_2,function(_4){objGeral.setRequired(_4,_3);dijit.byId(_4).set("readOnly",!_3);dijit.byId(_4).set("value","");});},liberaPerfil:function(){var _5=dijit.byId("usuario_nivel").get("value");var _6=_5=="N";objGeral.setRequired("perfil_id",_6);dijit.byId("perfil_id").setDisabled(!_6);}});var adminFuncionario=new modulo.admin.funcionario();}